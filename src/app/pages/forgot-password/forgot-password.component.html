<div class="forgot-password-wrapper">
    <div class="forgot-password-container card shadow-lg p-4" style="max-width: 420px; width: 100%;">
        <h2 class="text-center text-danger mb-4">Reset Your Password</h2>

        <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
            <!-- User ID -->
            <div class="mb-3">
                <label for="userId" class="form-label">User ID</label>
                <input id="userId" class="form-control" formControlName="userId" type="text" placeholder="Enter your User ID" />
                <div *ngIf="forgotPasswordForm.get('userId')?.invalid && forgotPasswordForm.get('userId')?.touched" class="text-danger mt-1">
                    User ID is required.
                </div>
            </div>

            <!-- Send OTP -->
            <div class="mb-3 text-center">
                <button type="button" class="btn btn-outline-primary" (click)="sendOTP()">Send OTP</button>
            </div>

            <!-- OTP -->
            <div class="mb-3" *ngIf="showOTPField">
                <label for="otp" class="form-label">Enter OTP</label>
                <input id="otp" class="form-control" formControlName="otp" type="text" placeholder="Enter OTP" />
                <div *ngIf="forgotPasswordForm.get('otp')?.invalid && forgotPasswordForm.get('otp')?.touched" class="text-danger mt-1">
                    OTP is required.
                </div>
                <div *ngIf="otpError" class="text-danger mt-1">
                    {{ otpError }}
                </div>
            </div>

            <!-- New Password -->
            <div class="mb-3" *ngIf="showResetFields">
                <label for="newPassword" class="form-label">New Password</label>
                <input id="newPassword" class="form-control" formControlName="newPassword" type="password" placeholder="Enter new password" />
                <div *ngIf="forgotPasswordForm.get('newPassword')?.invalid && forgotPasswordForm.get('newPassword')?.touched" class="text-danger mt-1">
                    Must include 1 uppercase, 1 lowercase, 1 number & 1 special character.
                </div>
            </div>

            <!-- Confirm Password -->
            <div class="mb-3" *ngIf="showResetFields">
                <label for="confirmPassword" class="form-label">Confirm Password</label>
                <input id="confirmPassword" class="form-control" formControlName="confirmPassword" type="password" placeholder="Confirm new password" />
                <div *ngIf="forgotPasswordForm.get('confirmPassword')?.invalid && forgotPasswordForm.get('confirmPassword')?.touched" class="text-danger mt-1">
                    Confirmation required.
                </div>
                <div *ngIf="passwordMismatch" class="text-danger mt-1">
                    Passwords do not match.
                </div>
            </div>

            <!-- Submit -->
            <div class="d-grid" *ngIf="showResetFields">
                <button class="btn btn-danger" type="submit" [disabled]="forgotPasswordForm.invalid || otpError">Reset Password</button>
            </div>
        </form>
    </div>
</div>